-> Step 1: Creating the Mapping Table
tx -1 shserif-maoken-heavy-labourer.ttf > raw.txt
tx -1 SourceHanSerifCN-Heavy.otf > raw-shs.txt

-> Step 2: Name-keyed to CID-keyed Conversion
//generate mapping files (stealing from SHS)
py ../build_final_otf_sans/combine_raw_map.py
//extract glyf table
tx -t1 ../shserif-maoken-heavy-labourer.ttf ../font.pfa
//prepare raw file
mergeFonts -cid cidfontinfo.FULL cidfont.raw map-final.txt ../font.pfa
//to check:
tx -pdf cidfont.raw cidfont.pdf

-> Step 3: Hinting the CIDFont Resource
//modify cidfont.raw first before continuing:
~~~
/Private 10 dict dup begin
/BlueValues [-250 -250 1100 1100] def
/StdHW [40] def
/StdVW [170] def
/LanguageGroup 1 def
~~~
//generate final .ps file
psautohint -a -o cidfont.ps cidfont.raw
//to check:
tx -0 cidfont.ps

-> Step 6: Building the CID-keyed OpenType Font
makeotf -f cidfont.ps -omitMacNames -ff features.FULL -fi cidfontinfo.FULL -mf ../FontMenuNameDB.SUBSET -r -nS -cs 25 -ch ../UniSourceHanSerifCN-UTF32-H -ci ../SourceHanSerif_CN_sequences.txt
//convert hinted ps file to hinted CFF
tx -cff +S cidfont.ps font.CFF
//replace CFF with hinted CFF
sfntedit -a CFF=font.CFF MaokenHeavyLabourer-Ming-Regular.otf


-> Extra: convert to TTF for Photoshop
otf2ttf -o .\MaokenHeavyLabourer-Ming-Regular.ttf .\MaokenHeavyLabourer-Ming-Regular.otf